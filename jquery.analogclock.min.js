(function(e){e.fn.analogclock=function(g){function p(c,e,d){c.data(q,e);c.data(r,d)}var h=window.devicePixelRatio;void 0==h&&(h=1);var c=e.extend({size:[100,100],frame_fill_color:"#ffffff",frame_color:"#808080",frame_width:4,zone_fill_color:"#808080",zone_ranges:[],minute_color:"#404040",minute_width:2,minute_shape:[[0,0],[0,-0.9]],hour_color:"#404040",hour_width:3,hour_shape:[[0,0],[0,-0.7]],dot_color:"#808080",dot_width:2,dot_shape:[[0,-0.9],[0,-0.95]],dot_minutes:[0,15,30,45]},g),q="analogclock_hour",
r="analogclock_minute",n={create:function(){return this.each(function(b){function k(b,d){function e(c,b,d,g){a.setTransform(1,0,0,1,0,0);a.translate(f+0.5,k+0.5);a.rotate(c);a.strokeStyle=b;a.lineWidth=d;a.beginPath();jQuery.each(g,function(c,b){var d=b[0]*h,e=b[1]*h;0==c?a.moveTo(d,e):a.lineTo(d,e)});a.stroke()}var f=l/2,k=m/2,h=Math.floor(Math.min(l,m)/2-1),g=h-a.lineWidth-1;a.setTransform(1,0,0,1,0,0);a.translate(f+0.5,k+0.5);a.fillStyle=c.frame_fill_color;a.strokeStyle=c.frame_color;a.lineWidth=
c.frame_width;a.lineCap="round";a.lineJoin="round";a.beginPath();a.arc(0,0,g,0,2*Math.PI);a.fill();a.beginPath();a.arc(0,0,g,0,2*Math.PI);a.stroke();a.setTransform(1,0,0,1,0,0);a.translate(f+0.5,k+0.5);a.fillStyle=c.zone_fill_color;jQuery.each(c.zone_ranges,function(c,b){var d=6*(b[0]%60)%360*Math.PI/180,e=6*(b[1]%60)%360*Math.PI/180;a.beginPath();a.moveTo(0,0);a.arc(0,0,g,d-Math.PI/2,e-Math.PI/2);a.lineTo(0,0);a.fill()});e(6*(d%60)%360*Math.PI/180,c.minute_color,c.minute_width,c.minute_shape);e((30*
(b%12)+d%60/2)%360*Math.PI/180,c.hour_color,c.hour_width,c.hour_shape);jQuery.each(c.dot_minutes,function(a,b){e(6*(b%60)%360*Math.PI/180,c.dot_color,c.dot_width,c.dot_shape)})}var d=e(this);b=document.createElement("canvas");var a=b.getContext("2d");e(b);var l=c.size[0],m=c.size[1],f=m*h;b.setAttribute("width",l*h);b.setAttribute("height",f);e(b).width(l);e(b).height(m);console.log("debug:"+l+", "+m);console.log("debug:"+l+", "+m);d.append(b);d.bind("_redraw",function(){var a=d.data(q),b=d.data(r);
k(a,b)});f=new Date;b=f.getHours();f=f.getMinutes();p(d,b,f);k(b,f)})},update:function(b,c){var d=e(this);if(2>arguments.length){var a=new Date;b=a.getHours();c=a.getMinutes()}p(d,b,c);d.trigger("_redraw")}};return n[g]?n[g].apply(this,Array.prototype.slice.call(arguments,1)):n.create.apply(this)}})(jQuery);
