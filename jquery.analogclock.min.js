(function(e){e.fn.analogclock=function(f){function p(b,g,d){b.data(q,g);b.data(r,d)}var g=window.devicePixelRatio;void 0==g&&(g=1);var b=e.extend({size:[100,100],background_color:"rgba(0, 0, 0, 0)",frame_fill_color:"#ffffff",frame_color:"#808080",frame_width:4,zone_fill_color:"#808080",zone_ranges:[],minute_color:"#404040",minute_width:2,minute_shape:[[0,0],[0,-0.9]],hour_color:"#404040",hour_width:3,hour_shape:[[0,0],[0,-0.7]],dot_color:"#808080",dot_width:2,dot_shape:[[0,-0.9],[0,-0.95]],dot_minutes:[0,
15,30,45]},f),q="analogclock_hour",r="analogclock_minute",l={create:function(){return this.each(function(c){function k(c,d){function h(b,c,d,g){a.setTransform(1,0,0,1,0,0);a.translate(e,f);a.rotate(b);a.strokeStyle=c;a.lineWidth=d;a.beginPath();jQuery.each(g,function(b,c){var d=c[0]*k,e=c[1]*k;0==b?a.moveTo(d,e):a.lineTo(d,e)});a.stroke()}var e=m/2+0.5,f=n/2+0.5,k=Math.min(e,f)-1;a.setTransform(1,0,0,1,0,0);a.fillStyle=b.background_color;a.fillRect(0,0,m,n);a.beginPath();a.lineWidth=1;a.arc(e,f,k,
0,2*Math.PI,!1);a.clip();a.clearRect(0,0,m,n);a.beginPath();a.rect(0,0,m,n);a.clip();a.setTransform(1,0,0,1,0,0);a.translate(e,f);a.fillStyle=b.frame_fill_color;a.strokeStyle=b.frame_color;a.lineWidth=b.frame_width*g;var l=k-a.lineWidth/2;a.lineCap="round";a.lineJoin="round";a.beginPath();a.arc(0,0,l,0,2*Math.PI);a.fill();a.beginPath();a.arc(0,0,l,0,2*Math.PI);a.stroke();a.setTransform(1,0,0,1,0,0);a.translate(e,f);a.fillStyle=b.zone_fill_color;jQuery.each(b.zone_ranges,function(b,c){var d=6*(c[0]%
60)%360*Math.PI/180,e=6*(c[1]%60)%360*Math.PI/180;a.beginPath();a.moveTo(0,0);a.arc(0,0,l,d-Math.PI/2,e-Math.PI/2);a.lineTo(0,0);a.fill()});h(6*(d%60)%360*Math.PI/180,b.minute_color,b.minute_width*g,b.minute_shape);h((30*(c%12)+d%60/2)%360*Math.PI/180,b.hour_color,b.hour_width*g,b.hour_shape);jQuery.each(b.dot_minutes,function(a,c){h(6*(c%60)%360*Math.PI/180,b.dot_color,b.dot_width*g,b.dot_shape)})}var d=e(this);c=document.createElement("canvas");var a=c.getContext("2d");e(c);var h=b.size[0],f=b.size[1],
m=h*g,n=f*g;c.setAttribute("width",m);c.setAttribute("height",n);e(c).width(h);e(c).height(f);d.append(c);d.bind("_redraw",function(){var a=d.data(q),c=d.data(r);k(a,c)});h=new Date;c=h.getHours();h=h.getMinutes();p(d,c,h);k(c,h)})},update:function(c,b){var d=e(this);if(2>arguments.length){var a=new Date;c=a.getHours();b=a.getMinutes()}p(d,c,b);d.trigger("_redraw")}};return l[f]?l[f].apply(this,Array.prototype.slice.call(arguments,1)):l.create.apply(this)}})(jQuery);
