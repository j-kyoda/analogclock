(function(g){g.fn.analogclock=function(h){function p(c,e,d){c.data(q,e);c.data(r,d)}var e=window.devicePixelRatio;void 0==e&&(e=1);var c=g.extend({size:[100,100],frame_fill_color:"#ffffff",frame_color:"#808080",frame_width:4,zone_fill_color:"#808080",zone_ranges:[],minute_color:"#404040",minute_width:2,minute_shape:[[0,0],[0,-0.9]],hour_color:"#404040",hour_width:3,hour_shape:[[0,0],[0,-0.7]],dot_color:"#808080",dot_width:2,dot_shape:[[0,-0.9],[0,-0.95]],dot_minutes:[0,15,30,45]},h),q="analogclock_hour",
r="analogclock_minute",k={create:function(){return this.each(function(b){function l(b,d){function f(c,b,d,e){a.setTransform(1,0,0,1,0,0);a.translate(g,h);a.rotate(c);a.strokeStyle=b;a.lineWidth=d;a.beginPath();jQuery.each(e,function(c,b){var d=b[0]*l,e=b[1]*l;0==c?a.moveTo(d,e):a.lineTo(d,e)});a.stroke()}var g=k/2+0.5,h=m/2+0.5,l=Math.floor(Math.min(k,m)/2-1);a.setTransform(1,0,0,1,0,0);a.translate(g,h);a.fillStyle=c.frame_fill_color;a.strokeStyle=c.frame_color;a.lineWidth=c.frame_width*e;var n=l-
a.lineWidth-1;a.lineCap="round";a.lineJoin="round";a.beginPath();a.arc(0,0,n,0,2*Math.PI);a.fill();a.beginPath();a.arc(0,0,n,0,2*Math.PI);a.stroke();a.setTransform(1,0,0,1,0,0);a.translate(g,h);a.fillStyle=c.zone_fill_color;jQuery.each(c.zone_ranges,function(c,b){var d=6*(b[0]%60)%360*Math.PI/180,e=6*(b[1]%60)%360*Math.PI/180;a.beginPath();a.moveTo(0,0);a.arc(0,0,n,d-Math.PI/2,e-Math.PI/2);a.lineTo(0,0);a.fill()});f(6*(d%60)%360*Math.PI/180,c.minute_color,c.minute_width*e,c.minute_shape);f((30*(b%
12)+d%60/2)%360*Math.PI/180,c.hour_color,c.hour_width*e,c.hour_shape);jQuery.each(c.dot_minutes,function(a,b){f(6*(b%60)%360*Math.PI/180,c.dot_color,c.dot_width*e,c.dot_shape)})}var d=g(this);b=document.createElement("canvas");var a=b.getContext("2d");g(b);var f=c.size[0],h=c.size[1],k=f*e,m=h*e;b.setAttribute("width",k);b.setAttribute("height",m);g(b).width(f);g(b).height(h);d.append(b);d.bind("_redraw",function(){var a=d.data(q),b=d.data(r);l(a,b)});f=new Date;b=f.getHours();f=f.getMinutes();p(d,
b,f);l(b,f)})},update:function(b,c){var d=g(this);if(2>arguments.length){var a=new Date;b=a.getHours();c=a.getMinutes()}p(d,b,c);d.trigger("_redraw")}};return k[h]?k[h].apply(this,Array.prototype.slice.call(arguments,1)):k.create.apply(this)}})(jQuery);
